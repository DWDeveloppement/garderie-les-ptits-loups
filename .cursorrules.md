# ğŸ¯ RÃ¨gles Cursor - Garderie Les P'tits Loups

## ğŸ‡«ğŸ‡· Langue de communication

**IMPORTANT** : Tous les Ã©changes, code, commentaires et documentation doivent Ãªtre **en franÃ§ais**.

---

## ğŸ¤– Optimisation des modÃ¨les IA

Pour Ã©conomiser les tokens et optimiser les coÃ»ts, utiliser le modÃ¨le appropriÃ© :

### SÃ©lection rapide

| TÃ¢che | ModÃ¨le | Autorisation |
|-------|--------|--------------|
| ğŸ“ Documentation, typos, lecture | **Haiku 4.5** (gratuit) | âŒ Non |
| ğŸ§© Composants simples (Button, Card) | **Haiku 4.5** (gratuit) | âŒ Non |
| âš™ï¸ Formulaires, hooks, API | **Sonnet 4.5** (standard) | âŒ Non |
| ğŸ—ï¸ Architecture, refactoring majeur | **Opus 4.5** (cerveau) | âœ… **Demander** |

### Processus Opus

```
âš ï¸ Cette tÃ¢che nÃ©cessite Opus car :
- [Raison 1]
- [Raison 2]
Estimation : ~X tokens
Puis-je procÃ©der ?
```

**Attendre confirmation** avant de dÃ©marrer.

> ğŸ“– **Documentation complÃ¨te** : Voir [CLAUDE.md](./CLAUDE.md)

---

## ğŸš€ Stack & Scripts

### Stack Technique

- **Framework** : Next.js 15 + TypeScript + Tailwind CSS v4
- **UI** : Shadcn UI + Radix UI
- **Palette** : Orange (neutre) + Purple (accent)
- **CMS** : Sanity v4.6.1
- **Email** : Resend

### Scripts Essentiels

```bash
npm run dev        # DÃ©veloppement (port 3000)
npm run sanity     # Sanity Studio (port 3333)
npm run refresh    # Clean + restart
npm run build      # Build production
npm run lint       # VÃ©rifier le code
```

---

## ğŸ“ Conventions Rapides

### TypeScript

```typescript
// âœ… Strict mode, type > interface, Ã©viter any
type ButtonProps = {
  variant: 'primary' | 'secondary'
  children: React.ReactNode
}
```

### React

```typescript
// âœ… Server Components par dÃ©faut
export default async function Page() {
  const data = await fetchData()
  return <Component data={data} />
}

// âœ… 'use client' uniquement si nÃ©cessaire
'use client'
export function InteractiveComponent() {
  const [state, setState] = useState()
}
```

### Tailwind CSS

```typescript
// âœ… Palette : Orange (neutre) + Purple (accent)
<Button className="bg-purple-9 hover:bg-purple-10 text-white" />
<Card className="bg-orange-1 border-orange-6" />

// âœ… Utiliser cn() pour merge
import { cn } from 'lib/utils'
className={cn('base-classes', condition && 'conditional', className)}
```

### Nommage

```typescript
// Composants : PascalCase
ContactForm.tsx

// Fonctions : camelCase
validateEmail()

// Constantes : UPPER_SNAKE_CASE
const MAX_FILE_SIZE = 5000000
```

### Commentaires

```typescript
/**
 * Description de la fonction
 *
 * @param param - Description du paramÃ¨tre
 * @returns Description du retour
 */
function myFunction(param: string): boolean {
  // Commentaire en franÃ§ais
}
```

---

## ğŸ—ï¸ Architecture

### Data Fetching : SSG + ISR

```typescript
export const revalidate = 60 // Cache 60 secondes
// + Webhook Sanity pour revalidation instantanÃ©e
```

### Structure

```
src/
â”œâ”€â”€ app/              # Pages Next.js
â”œâ”€â”€ components/       # Composants React
â”‚   â”œâ”€â”€ ui/           # Shadcn UI
â”‚   â”œâ”€â”€ layout/       # Header, Footer
â”‚   â”œâ”€â”€ pages/        # Sections de pages
â”‚   â”œâ”€â”€ shared/       # RÃ©utilisables
â”‚   â””â”€â”€ forms/        # Formulaires
â”œâ”€â”€ hooks/            # Hooks personnalisÃ©s
â”œâ”€â”€ lib/              # Utilitaires
â”œâ”€â”€ styles/           # CSS (palette, fonts)
â””â”€â”€ types/            # Types TypeScript

sanity/
â”œâ”€â”€ schemas/          # SchÃ©mas de contenu
â”œâ”€â”€ queries/          # RequÃªtes GROQ
â”œâ”€â”€ types/            # Types Sanity
â””â”€â”€ client.ts         # Client configurÃ©
```

---

## ğŸ”’ SÃ©curitÃ©

```typescript
// 1. Client : Zod validation
const schema = z.object({ email: z.string().email() })

// 2. reCAPTCHA v2 Check
const token = await executeRecaptcha()

// 3. Honeypot Detection
if (formData.website) return error

// 4. Server Validation
const validatedData = schema.parse(body)

// âŒ Jamais de secrets dans le code
// âœ… Toujours utiliser .env.local
```

---

## ğŸ“š Documentation ComplÃ¨te

### Navigation

- **[CLAUDE.md](./CLAUDE.md)** : Guide assistant IA complet
- **[CONTRIBUTING.md](./CONTRIBUTING.md)** : Workflow Git, contributions
- **[docs/](./docs/)** : Documentation technique dÃ©taillÃ©e
  - [01-code-style/](./docs/01-code-style/) : TypeScript, React, formatage
  - [02-components/](./docs/02-components/) : Patterns UI, Server/Client
  - [03-architecture/](./docs/03-architecture/) : Structure, design system
  - [04-sanity/](./docs/04-sanity/) : CMS, schÃ©mas, queries
  - [05-features/](./docs/05-features/) : Formulaires, galeries, maps
  - [06-performance/](./docs/06-performance/) : SEO, Lighthouse, ISR
  - [07-git-workflow/](./docs/07-git-workflow/) : Branches, commits
  - [08-reference/](./docs/08-reference/) : Scripts, troubleshooting

---

## âœ… Checklist Avant Commit

- [ ] TypeScript : `npx tsc --noEmit`
- [ ] ESLint : `npm run lint`
- [ ] Build : `npm run build`
- [ ] Types dÃ©finis
- [ ] Commentaires en franÃ§ais
- [ ] Imports avec aliases (`@/*`)
- [ ] Tailwind uniquement
- [ ] Alt text sur images
- [ ] Pas de secrets

---

## ğŸ› Troubleshooting

```bash
# Port occupÃ©
npm run kill:dev

# Cache corrompu
npm run clean && npm run dev

# Build Ã©choue
rm -rf .next node_modules && npm install && npm run build
```

---

**Version** : 2.0.0 (alignÃ© avec CLAUDE.md)
**Maintenu par** : Ricardo Do Vale
